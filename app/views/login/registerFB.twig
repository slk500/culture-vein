{% extends 'templates/default.twig' %}

{% block result %}
    <div class="col-xs-12 col-md-6 col-md-offset-3 white_container">

        <form action='login\registerFB.php' method='post'>

            <div class="form-group">
                <label class="control-label" for="username">Username:</label>
                <div class="input-group col-xs-12">
                    <input class="form-control" placeholder="Username" name="username" type="text" />
                </div>
            </div>

            <div class="form-group">
                <label class="control-label" for="email">Email:</label>
                <div class="input-group col-xs-12">
                    <input class="form-control" placeholder="Email" id="email" name="email" type="email" />
                </div>
            </div>

            <input type="hidden" name="facebook_id" value="{{ facebook_id }}">

            <div class="form-group">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>

    </div>
{% endblock %}

{% block javascript %}

    {{ parent() }}
    <script src='http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js'></script>
    <script>
        $( document ).ready(function() {

            $("#email").val('{{ email }}');

        $('form').validate({
            rules: {
                email: {
                    required: true,
                    remote: 'email_exist.php'
                },
                username: {
                    required: true,
                    minlength: 3,
                    remote: 'username_exist.php'
                }
            },
            messages: {
                username: {
                    remote: "The username is already taken. Please choose another one."
                },
                email: {
                    remote: "The email address is already taken. Please choose another one."
                }
            },


            highlight: function(element) {
                $(element).closest('.form-group').addClass('has-error');
            },
            unhighlight: function(element) {
                $(element).closest('.form-group').removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });
        });



    </script>

{% endblock%}